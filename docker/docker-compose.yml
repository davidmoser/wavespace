version: '3.8'

services:
  dependencies:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    image: gebregl/wavespace-dependencies:v2

  spectrogram_converter:
    build:
      context: ..
      dockerfile: docker/spectrogram_converter/Dockerfile
    image: gebregl/wavespace-spectrogram-converter:v1
    volumes:
      - /home/david/mine/projects/wavespace/resources:/resources

  spectrogram_autoencoder:
    build:
      context: ..
      dockerfile: docker/spectrogram_autoencoder/Dockerfile
    image: gebregl/wavespace-spectrogram-autoencoder:v12
    volumes:
      - /home/david/mine/projects/wavespace/resources:/resources
    environment:
      WANDB_API_KEY: ${WANDB_API_KEY}