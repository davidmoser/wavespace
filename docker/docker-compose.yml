services:
  dependencies:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    image: gebregl/wavespace-dependencies:v2

  spectrogram_converter:
    build:
      context: ..
      dockerfile: docker/spectrogram_converter/Dockerfile
    image: gebregl/wavespace-spectrogram-converter:v3
    volumes:
      - /home/david/mine/projects/wavespace/resources:/resources

  spectrogram_autoencoder:
    build:
      context: ..
      dockerfile: docker/spectrogram_autoencoder/Dockerfile
    image: gebregl/wavespace-spectrogram-autoencoder:v13
    volumes:
      - /home/david/mine/projects/wavespace/resources:/resources
    environment:
      WANDB_API_KEY: ${WANDB_API_KEY}

  pitch_detection:
    build:
      context: ..
      dockerfile: docker/pitch_detection/Dockerfile
    image: gebregl/wavespace-pitch-detection:v3
    volumes:
      - /home/david/mine/projects/wavespace/resources:/resources
    environment:
      WANDB_API_KEY: ${WANDB_API_KEY}